/* Design System v1 */
:root {
  --font-sans: 'Inter', 'Segoe UI', Arial, sans-serif;
  --radius-xs: 3px; --radius-sm:5px; --radius:10px; --radius-lg:18px;
  --shadow-sm: 0 1px 2px rgba(0,0,0,.06), 0 0 0 1px rgba(0,0,0,.04);
  --shadow: 0 4px 14px rgba(0,0,0,.08);
  --shadow-lg: 0 8px 32px -4px rgba(0,0,0,.15);
  --transition: .18s cubic-bezier(.4,0,.2,1);
  --space-1:4px; --space-2:8px; --space-3:12px; --space-4:16px; --space-5:20px; --space-6:24px; --space-8:32px; --space-10:40px;
  --color-bg: #f5f7fa; --color-bg-alt:#eef2f6; --color-surface:#ffffff; --color-elevated:#ffffff;
  --color-border:#dbe1e8; --color-border-strong:#c3ccd5;
  --color-text:#1d232a; --color-text-soft:#5a6572; --color-text-faint:#8d98a4;
  --color-primary:#2563eb; --color-primary-hover:#1d4fd8; --color-primary-soft:#e3efff;
  --color-accent:#7c3aed; --color-accent-soft:#f1e9ff;
  --color-danger:#dc2626; --color-danger-soft:#ffe9e9;
  --color-warning:#d97706; --color-success:#059669;
  --gradient-brand: linear-gradient(135deg,#2563eb 0%,#7c3aed 70%);
}

[data-theme='dark'] {
  --color-bg:#0f141a; --color-bg-alt:#141b23; --color-surface:#18222c; --color-elevated:#1f2b37;
  --color-border:#26323f; --color-border-strong:#2f3d4b;
  --color-text:#e5ecf3; --color-text-soft:#b5c2cf; --color-text-faint:#7d8893;
  --color-primary:#3b82f6; --color-primary-hover:#2563eb; --color-primary-soft:#1a2635;
  --color-accent:#a855f7; --color-accent-soft:#2a183d;
  --color-danger:#ef4444; --color-danger-soft:#3b1f1f;
  --gradient-brand: linear-gradient(135deg,#3b82f6 0%,#a855f7 70%);
  --shadow-sm: 0 1px 2px rgba(0,0,0,.6), 0 0 0 1px rgba(255,255,255,.03);
  --shadow: 0 4px 18px -2px rgba(0,0,0,.55);
  --shadow-lg: 0 8px 42px -6px rgba(0,0,0,.6);
}

html { box-sizing:border-box; }
*,*::before,*::after { box-sizing:inherit; }
body { margin:0; background:var(--color-bg); color:var(--color-text); font-family:var(--font-sans); -webkit-font-smoothing:antialiased; }

/* Layout */
.app-shell { display:grid; grid-template-columns: 250px 1fr; min-height:100vh; }
@media (max-width: 940px){ .app-shell { grid-template-columns:1fr; } .sidebar { position:fixed; top:0; left:0; height:100vh; width:240px; transform:translateX(-105%); transition:var(--transition); z-index:1000; } .sidebar.open { transform:translateX(0); } .topbar .menu-btn { display:inline-flex; } }

.sidebar { background:var(--color-surface); border-right:1px solid var(--color-border); display:flex; flex-direction:column; padding:var(--space-5) var(--space-4); gap:var(--space-4); }
.brand { display:flex; align-items:center; gap:10px; font-weight:600; font-size:18px; letter-spacing:.5px; background:var(--gradient-brand); -webkit-background-clip:text; background-clip:text; color:transparent; }
.nav-section-title { font-size:11px; text-transform:uppercase; letter-spacing:1px; color:var(--color-text-faint); font-weight:600; margin:4px 0 2px; }
.nav-list { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:4px; }
.nav-list a { text-decoration:none; display:flex; align-items:center; gap:10px; font-size:14px; padding:10px 12px; color:var(--color-text-soft); border-radius:var(--radius-sm); font-weight:500; transition:var(--transition); position:relative; }
.nav-list a:hover { background:var(--color-primary-soft); color:var(--color-primary); }
.nav-list a.active { background:var(--gradient-brand); color:#fff; box-shadow:var(--shadow-sm); }

.topbar { background:var(--color-surface); border-bottom:1px solid var(--color-border); display:flex; align-items:center; justify-content:space-between; padding:0 20px; height:60px; position:sticky; top:0; z-index:900; }
.topbar-right { display:flex; align-items:center; gap:14px; }
.menu-btn { display:none; background:var(--color-primary); color:#fff; border:none; padding:10px 14px; border-radius:var(--radius-sm); cursor:pointer; font-weight:600; box-shadow:var(--shadow-sm); }
.theme-toggle { background:var(--color-bg-alt); border:1px solid var(--color-border); color:var(--color-text-soft); padding:8px 14px; border-radius:var(--radius-sm); cursor:pointer; font-weight:500; display:inline-flex; gap:6px; align-items:center; }
.theme-toggle:hover { background:var(--color-primary-soft); color:var(--color-primary); }
.user-chip { background:var(--color-primary-soft); color:var(--color-primary); padding:8px 12px; border-radius:30px; font-size:13px; font-weight:600; display:flex; gap:8px; align-items:center; }

.main-area { padding:30px clamp(14px,3vw,42px) 60px; }
.footer { text-align:center; font-size:12px; color:var(--color-text-faint); padding:40px 0 20px; }

/* Components */
.card { background:var(--color-surface); border:1px solid var(--color-border); border-radius:var(--radius); padding:20px 22px 22px; box-shadow:var(--shadow-sm); position:relative; }
.card.elevated { box-shadow:var(--shadow); }
.card h3 { margin:0 0 10px; font-size:15px; font-weight:600; letter-spacing:.4px; color:var(--color-text-soft); text-transform:uppercase; }
.metric { font-size:34px; font-weight:700; letter-spacing:-1px; background:var(--gradient-brand); -webkit-background-clip:text; background-clip:text; color:transparent; line-height:1; }
.grid { display:grid; gap:20px; }
.grid.cols-5 { grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); }
.grid.cols-3 { grid-template-columns: repeat(auto-fit,minmax(260px,1fr)); }

.table-wrap { overflow:auto; border:1px solid var(--color-border); border-radius:var(--radius); background:var(--color-surface); }
.table { width:100%; border-collapse:collapse; font-size:14px; }
.table th, .table td { padding:10px 12px; text-align:left; border-bottom:1px solid var(--color-border); }
.table th { background:var(--color-bg-alt); font-size:11px; letter-spacing:1px; text-transform:uppercase; color:var(--color-text-faint); font-weight:600; position:sticky; top:0; }
.table tbody tr:hover { background:var(--color-primary-soft); }
.badge { display:inline-flex; align-items:center; font-size:11px; font-weight:600; padding:4px 10px; border-radius:40px; letter-spacing:.5px; background:var(--color-bg-alt); color:var(--color-text-soft); }
.badge.primary { background:var(--color-primary-soft); color:var(--color-primary); }
.badge.danger { background:var(--color-danger-soft); color:var(--color-danger); }
.badge.outline { background:transparent; border:1px solid var(--color-border); }

.btn { --btn-bg:var(--color-primary); --btn-bg-hover:var(--color-primary-hover); --btn-color:#fff; --btn-border:var(--color-primary);
  background:var(--btn-bg); color:var(--btn-color); border:1px solid var(--btn-border); padding:10px 18px; border-radius:var(--radius-sm); font-size:14px; font-weight:600; cursor:pointer; display:inline-flex; gap:8px; align-items:center; text-decoration:none; transition:var(--transition); }
.btn:hover { background:var(--btn-bg-hover); }
.btn.outline { --btn-bg:transparent; --btn-color:var(--color-primary); }
.btn.outline:hover { background:var(--color-primary-soft); }
.btn.danger { --btn-bg:var(--color-danger); --btn-bg-hover:#b91c1c; --btn-border:var(--color-danger); }
.btn.muted { --btn-bg:var(--color-bg-alt); --btn-bg-hover:var(--color-primary-soft); --btn-color:var(--color-text-soft); --btn-border:var(--color-border); }
.btn.block { width:100%; justify-content:center; }

.form-grid { display:grid; gap:16px; }
.input { width:100%; background:var(--color-surface); border:1px solid var(--color-border); padding:10px 12px; border-radius:var(--radius-sm); font:inherit; color:var(--color-text); }
.input:focus { outline:2px solid var(--color-primary-soft); outline-offset:1px; }
label small { display:block; font-size:11px; color:var(--color-text-faint); margin-top:4px; }

.flex { display:flex; }
.flex.gap { gap:16px; }
.flex.center { align-items:center; }
.flex.between { justify-content:space-between; }
.stack { display:flex; flex-direction:column; gap:var(--space-3); }

.flash { background:var(--color-primary-soft); border:1px solid var(--color-primary); padding:12px 16px; border-radius:var(--radius-sm); color:var(--color-primary); font-weight:500; }
.flash.error { background:var(--color-danger-soft); border-color:var(--color-danger); color:var(--color-danger); }

.divider { height:1px; background:var(--color-border); margin:24px 0; }

.responsive-hide { display:none; }
@media (min-width: 941px){ .responsive-hide.desktop { display:none; } }
@media (max-width: 940px){ .responsive-hide.mobile { display:none; } }

/* Animations */
.fade-in { animation:fade .35s ease; }
@keyframes fade { from { opacity:0; transform:translateY(4px);} to { opacity:1; transform:translateY(0);} }

/* Utility spacing */
.mt-2{margin-top:var(--space-2);} .mt-3{margin-top:var(--space-3);} .mt-4{margin-top:var(--space-4);} .mt-6{margin-top:var(--space-6);} .mb-0{margin-bottom:0;} .mb-2{margin-bottom:var(--space-2);} .mb-3{margin-bottom:var(--space-3);} .mb-4{margin-bottom:var(--space-4);} .mb-6{margin-bottom:var(--space-6);} .py-2{padding-top:var(--space-2);padding-bottom:var(--space-2);} .py-4{padding-top:var(--space-4);padding-bottom:var(--space-4);} .px-4{padding-left:var(--space-4);padding-right:var(--space-4);} .p-4{padding:var(--space-4);} .p-5{padding:var(--space-5);} .p-6{padding:var(--space-6);} .pt-0{padding-top:0;} .w-full{width:100%;}

/* Scrollbars */
.sidebar, .table-wrap, .calendar-sidebar { scrollbar-width:thin; scrollbar-color: var(--color-primary-soft) transparent; }
.sidebar::-webkit-scrollbar { width:8px; } .sidebar::-webkit-scrollbar-track { background:transparent; } .sidebar::-webkit-scrollbar-thumb { background:var(--color-primary-soft); border-radius:10px; }

/* Calendar overrides (basic integration) */
.fc .fc-toolbar-title { font-size:18px; font-weight:600; }
.fc-theme-standard td, .fc-theme-standard th { border-color:var(--color-border); }
.fc .fc-daygrid-day.fc-day-today { background:var(--color-primary-soft); }
.fc .fc-button-primary { background:var(--color-primary); border:none; } .fc .fc-button-primary:hover { background:var(--color-primary-hover); }

/* Dark mode tweaks for calendar */
[data-theme='dark'] .fc .fc-toolbar-title { color:var(--color-text); }

/* Calendar Layout & Components */
.calendar-shell { display:grid; grid-template-columns:280px 1fr; gap:var(--space-4); }
@media (max-width:1100px){ .calendar-shell { grid-template-columns:250px 1fr; } }
@media (max-width:900px){ .calendar-shell { grid-template-columns:1fr; } }
.calendar-panel { background:var(--color-surface); border:1px solid var(--color-border); border-radius:var(--radius); padding:var(--space-5) var(--space-5) var(--space-6); box-shadow:var(--shadow-sm); display:flex; flex-direction:column; gap:var(--space-6); max-height:calc(100vh - 170px); overflow:auto; position:relative; }
@media (max-width:900px){ .calendar-panel { position:fixed; top:60px; left:0; width:260px; transform:translateX(-105%); z-index:1200; transition:var(--transition);} .calendar-panel.open { transform:translateX(0);} }
.calendar-main { background:var(--color-surface); border:1px solid var(--color-border); border-radius:var(--radius); box-shadow:var(--shadow-sm); padding:var(--space-3) var(--space-3) var(--space-6); }
.calendar-toggle { display:none; }
@media (max-width:900px){ .calendar-toggle { display:inline-flex; margin-bottom:var(--space-3); } }
.calendar-section h3 { margin:0 0 var(--space-2); font-size:12px; letter-spacing:.5px; text-transform:uppercase; color:var(--color-text-faint); font-weight:600; }
.mini-hint { font-size:11px; color:var(--color-text-faint); margin-top:-4px; margin-bottom:6px; }
.inline-flags { display:flex; gap:6px; flex-wrap:wrap; margin:4px 0 6px; }
.inline-flags label { font-size:12px; background:var(--color-bg-alt); border:1px solid var(--color-border); padding:4px 10px; border-radius:40px; cursor:pointer; display:flex; align-items:center; gap:4px; }
.calendar-divider { height:1px; background:var(--color-border); margin:12px 0 14px; }
.filter-group label { display:flex; gap:6px; font-size:13px; cursor:pointer; margin-bottom:6px; align-items:center; }
.legend { display:flex; flex-direction:column; gap:6px; }
.legend-item { display:flex; gap:8px; align-items:center; font-size:12px; }
.legend-color { width:14px; height:14px; border-radius:3px; border:1px solid var(--color-border); box-shadow:inset 0 0 0 1px rgba(0,0,0,.06); }
.scroll-box { max-height:200px; overflow:auto; padding-right:4px; font-size:13px; line-height:1.3; }
.badge-inline { display:inline-block; font-size:10px; background:var(--color-bg-alt); padding:2px 6px; border-radius:10px; margin-left:4px; }
.event-form .input, .event-form select, .event-form textarea { font-size:14px; }
.event-form textarea { resize:vertical; min-height:60px; }
.event-form .actions { margin-top:6px; }
.fc-day-today, .fc .fc-daygrid-day.fc-day-today { background:var(--color-primary-soft) !important; }
.fc-daygrid-event { border-radius:4px; font-weight:500; }

/* Modal basic styling override for dark mode */
[data-theme='dark'] #eventEditModal form { color:var(--color-text); }

/* Generic Modal Component */
.modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,.45); display:none; align-items:center; justify-content:center; z-index:2000; backdrop-filter:blur(2px); }
.modal-backdrop.open { display:flex; animation:fade .25s ease; }
.modal { background:var(--color-elevated); border:1px solid var(--color-border); border-radius:var(--radius); padding:var(--space-5) var(--space-5) var(--space-6); width:min(480px,90vw); box-shadow:var(--shadow-lg); display:flex; flex-direction:column; gap:var(--space-3); }
.modal h3 { margin:0 0 4px; font-size:18px; letter-spacing:.5px; font-weight:600; background:var(--gradient-brand); -webkit-background-clip:text; background-clip:text; color:transparent; }
.modal-actions { display:flex; justify-content:flex-end; gap:var(--space-3); margin-top:var(--space-2); }

/* Color Palette */
.color-palette { display:flex; flex-wrap:wrap; gap:8px; margin:6px 0 4px; }
.color-chip { width:30px; height:30px; border-radius:8px; cursor:pointer; position:relative; border:2px solid transparent; box-shadow:0 0 0 1px var(--color-border); transition:var(--transition); }
.color-chip:hover { transform:translateY(-2px); box-shadow:0 4px 12px -2px rgba(0,0,0,.25); }
.color-chip.active { border-color:var(--color-primary); box-shadow:0 0 0 2px var(--color-primary-soft), 0 4px 14px -2px rgba(0,0,0,.25); }
.color-chip span { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:14px; color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.4); }

/* Drag & Drop Feedback */
.dragging-event .fc-daygrid-day-frame:hover { outline:2px dashed var(--color-primary); outline-offset:-2px; }
.fc .fc-event.fc-event-dragging { opacity:.7; }
.fc .fc-highlight { background:var(--color-accent-soft); }

/* Quick Add Popover */
.quick-add-popover { position:absolute; background:var(--color-elevated); border:1px solid var(--color-border); border-radius:var(--radius-sm); padding:12px 14px 14px; width:220px; z-index:2100; box-shadow:var(--shadow); display:flex; flex-direction:column; gap:8px; animation:fade .2s ease; }
.quick-add-popover h4 { margin:0; font-size:13px; letter-spacing:.5px; text-transform:uppercase; color:var(--color-text-faint); }
.quick-add-popover .actions { display:flex; gap:8px; justify-content:flex-end; }
.quick-add-popover input { font-size:13px; padding:6px 8px; }

[data-theme='dark'] .quick-add-popover { box-shadow:0 8px 28px -4px rgba(0,0,0,.7); }
[data-theme='dark'] .modal { box-shadow:0 10px 40px -4px rgba(0,0,0,.75); }

/* Finance Styles entfernt */
